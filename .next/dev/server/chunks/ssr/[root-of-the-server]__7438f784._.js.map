{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/chghosts/Developpement/test%20gemini%203/app/dashboard/builder/%5Bid%5D/BuilderClient.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { DndContext, useDraggable, useDroppable, DragOverlay, MouseSensor, TouchSensor, useSensor, useSensors, DragEndEvent, DragStartEvent, DragOverEvent } from '@dnd-kit/core';\nimport { restrictToParentElement } from '@dnd-kit/modifiers';\nimport { Save, Type, Image as ImageIcon, Minus, Box, ArrowLeft, Move, Table as TableIcon, Palette, Hash, PaintBucket, AlignLeft, AlignCenter, AlignRight, Settings, FileText, Eye, X, LayoutTemplate } from 'lucide-react';\nimport Link from 'next/link';\nimport { v4 as uuidv4 } from 'uuid';\nimport InvoiceRenderer from '@/components/InvoiceRenderer';\n\n// Types\ntype ElementType = 'text' | 'image' | 'box' | 'line' | 'table';\n\nexport interface GlobalSettings {\n  padding: number;\n  headerHeight: number;\n  footerHeight: number;\n}\n\nexport interface EditorElement {\n  id: string;\n  type: ElementType;\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  content?: string;\n  style?: React.CSSProperties;\n  data?: any;\n}\n\n// Components\nfunction SidebarItem({ type, icon: Icon, label }: { type: ElementType, icon: any, label: string }) {\n  const { attributes, listeners, setNodeRef } = useDraggable({\n    id: `sidebar-${type}`,\n    data: { type, isSidebar: true },\n  });\n\n  return (\n    <div ref={setNodeRef} {...listeners} {...attributes} className=\"group p-4 bg-white mb-3 border border-gray-200 rounded-xl cursor-grab hover:bg-blue-50 hover:border-blue-200 shadow-sm transition-all flex items-center gap-3\">\n      <div className=\"p-2 bg-gray-100 rounded-lg text-gray-600 group-hover:bg-blue-100 group-hover:text-blue-600 transition-colors\">\n         <Icon size={20} />\n      </div>\n      <span className=\"font-medium text-gray-700 group-hover:text-blue-700\">{label}</span>\n    </div>\n  );\n}\n\nfunction DraggableElement({ element, isSelected, onSelect }: { element: EditorElement, isSelected: boolean, onSelect: (id: string) => void }) {\n  const { attributes, listeners, setNodeRef, transform } = useDraggable({\n    id: element.id,\n    data: { ...element, isSidebar: false },\n  });\n\n  const style: React.CSSProperties = {\n    position: 'absolute',\n    top: element.y,\n    left: element.x,\n    width: element.w,\n    height: element.h,\n    transform: transform ? `translate3d(${transform.x}px, ${transform.y}px, 0)` : undefined,\n    border: isSelected ? '2px solid #2563eb' : '1px dashed transparent',\n    zIndex: isSelected ? 10 : 1,\n    cursor: 'move',\n    ...element.style,\n  };\n\n  const renderContent = () => {\n    switch (element.type) {\n      case 'text':\n        return <div className=\"w-full h-full overflow-hidden leading-tight\" style={{ color: element.style?.color || 'inherit' }}>{element.content || 'Texte'}</div>;\n      case 'box':\n        return (\n          <div \n            className=\"w-full h-full\" \n            style={{ \n              backgroundColor: element.style?.backgroundColor || '#e5e7eb', \n              borderColor: element.style?.borderColor || '#9ca3af',\n              borderWidth: element.style?.borderWidth || '1px',\n              borderStyle: 'solid',\n              borderRadius: element.style?.borderRadius || '0px'\n            }}\n          ></div>\n        );\n      case 'line':\n        return (\n          <div className=\"w-full h-full flex items-center\">\n             <div className=\"w-full\" style={{ height: element.style?.height || '2px', backgroundColor: element.style?.backgroundColor || 'black' }}></div>\n          </div>\n        );\n      case 'table':\n        return (\n          <div className=\"w-full h-full overflow-hidden bg-white border border-gray-200\">\n             <div className=\"p-2 bg-gray-50 border-b text-xs text-center text-gray-500\">Tableau d'articles (Aperçu)</div>\n             <div className=\"p-2 text-xs space-y-2\">\n                <div className=\"flex justify-between border-b pb-1 font-bold\">\n                   <span>Description</span><span>Total</span>\n                </div>\n                <div className=\"flex justify-between text-gray-400\">\n                   <span>Article 1</span><span>100 €</span>\n                </div>\n                <div className=\"flex justify-between text-gray-400\">\n                   <span>Article 2</span><span>50 €</span>\n                </div>\n             </div>\n          </div>\n        );\n      default:\n        return <div>Element</div>;\n    }\n  };\n\n  return (\n    <div \n      ref={setNodeRef} \n      style={style} \n      {...listeners} \n      {...attributes}\n      onClick={(e) => { e.stopPropagation(); onSelect(element.id); }}\n      className={`hover:outline hover:outline-blue-300 group ${isSelected ? 'shadow-lg ring-2 ring-blue-500/20' : ''}`}\n    >\n      {renderContent()}\n      {isSelected && (\n        <div className=\"absolute -top-8 left-0 bg-blue-600 text-white text-[10px] px-2 py-1 rounded flex items-center gap-1 font-mono shadow-md\">\n           <Move size={10} />\n           x:{Math.round(element.x)} y:{Math.round(element.y)}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default function BuilderClient({ template }: { template: any }) {\n  const [isMounted, setIsMounted] = useState(false);\n  const [elements, setElements] = useState<EditorElement[]>([]);\n  const [globalSettings, setGlobalSettings] = useState<GlobalSettings>({ padding: 40, headerHeight: 0, footerHeight: 0 });\n\n  useEffect(() => {\n    setIsMounted(true);\n    try {\n      const parsed = JSON.parse(template.content);\n      if (Array.isArray(parsed)) {\n        setElements(parsed);\n      } else {\n        setElements(parsed.elements || []);\n        setGlobalSettings(parsed.globalSettings || { padding: 40, headerHeight: 0, footerHeight: 0 });\n      }\n    } catch {\n      setElements([]);\n    }\n  }, [template.content]);\n\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [activeDragId, setActiveDragId] = useState<string | null>(null);\n  const [activeDragData, setActiveDragData] = useState<any>(null);\n  const [saving, setSaving] = useState(false);\n  const [showPreview, setShowPreview] = useState(false);\n\n  useEffect(() => {\n    setIsMounted(true);\n  }, []);\n\n  const { setNodeRef: setCanvasRef, isOver } = useDroppable({ id: 'canvas' });\n\n  const sensors = useSensors(\n    useSensor(MouseSensor, { activationConstraint: { distance: 5 } }),\n    useSensor(TouchSensor)\n  );\n\n  const handleDragStart = (event: DragStartEvent) => {\n    setActiveDragId(event.active.id as string);\n    setActiveDragData(event.active.data.current);\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n    setActiveDragId(null);\n    setActiveDragData(null);\n\n    if (!active.data.current?.isSidebar && !over) return; \n\n    const isSidebar = active.data.current?.isSidebar;\n\n    if (isSidebar) {\n      const type = active.data.current?.type as ElementType;\n      \n      let defaultW = 150;\n      let defaultH = 50;\n      if (type === 'line') { defaultW = 200; defaultH = 10; }\n      if (type === 'table') { defaultW = 600; defaultH = 200; }\n      if (type === 'box') { defaultW = 100; defaultH = 100; }\n\n      const newElement: EditorElement = {\n        id: uuidv4(),\n        type,\n        x: 50, \n        y: 50,\n        w: defaultW,\n        h: defaultH,\n        content: type === 'text' ? 'Nouveau texte' : undefined,\n        style: { fontSize: '14px', color: '#000000', backgroundColor: type === 'box' ? '#f3f4f6' : undefined }\n      };\n      setElements([...elements, newElement]);\n      setSelectedId(newElement.id);\n    } else {\n      const id = active.id as string;\n      const delta = event.delta;\n      setElements(elements.map(el => {\n        if (el.id === id) {\n          return {\n            ...el,\n            x: el.x + delta.x,\n            y: el.y + delta.y\n          };\n        }\n        return el;\n      }));\n    }\n  };\n\n  const saveTemplate = async () => {\n    setSaving(true);\n    const contentToSave = JSON.stringify({\n      elements,\n      globalSettings\n    });\n    await fetch(`/api/templates/${template.id}`, {\n      method: 'PUT',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ content: contentToSave }),\n    });\n    setSaving(false);\n  };\n\n  const updateSelected = (key: keyof EditorElement | 'style', value: any) => {\n    if (!selectedId) return;\n    setElements(elements.map(el => {\n      if (el.id === selectedId) {\n        if (key === 'style') {\n            return { ...el, style: { ...el.style, ...value } };\n        }\n        return { ...el, [key]: value };\n      }\n      return el;\n    }));\n  };\n\n  const alignElement = (alignment: 'left' | 'center' | 'right') => {\n    if (!selectedId) return;\n    const el = elements.find(e => e.id === selectedId);\n    if (!el) return;\n\n    const canvasWidth = 794;\n    const padding = globalSettings.padding;\n    let newX = el.x;\n\n    switch (alignment) {\n        case 'left':\n            newX = padding;\n            break;\n        case 'center':\n            newX = (canvasWidth - el.w) / 2;\n            break;\n        case 'right':\n            newX = canvasWidth - el.w - padding;\n            break;\n    }\n\n    updateSelected('x', newX);\n  };\n\n  const addVariable = (variable: string) => {\n    if (!selectedId) return;\n    const el = elements.find(e => e.id === selectedId);\n    if (el && el.type === 'text') {\n      const newContent = (el.content || '') + ` {{${variable}}}`;\n      updateSelected('content', newContent);\n    }\n  };\n\n  const selectedElement = elements.find(el => el.id === selectedId);\n\n  if (!isMounted) return null;\n\n  return (\n    <DndContext sensors={sensors} onDragStart={handleDragStart} onDragEnd={handleDragEnd}>\n      <div className=\"h-[calc(100vh-64px)] flex flex-col bg-gray-50\">\n        {/* Toolbar */}\n        <div className=\"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6 shadow-sm z-20\">\n           <div className=\"flex items-center gap-4\">\n             <Link href=\"/dashboard\" className=\"p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\"><ArrowLeft size={20} /></Link>\n             <div>\n               <h1 className=\"font-bold text-gray-900\">{template.name}</h1>\n               <p className=\"text-xs text-gray-500\">Éditeur visuel</p>\n             </div>\n           </div>\n           <button \n             onClick={saveTemplate}\n             className=\"bg-blue-600 text-white px-5 py-2 rounded-full font-medium flex items-center gap-2 hover:bg-blue-700 shadow-lg shadow-blue-600/20 transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed\"\n             disabled={saving}\n            >\n             <Save size={18} /> {saving ? 'Enregistrement...' : 'Enregistrer'}\n           </button>\n           <button \n             onClick={() => setShowPreview(true)}\n             className=\"ml-3 bg-gray-900 text-white px-5 py-2 rounded-full font-medium flex items-center gap-2 hover:bg-gray-800 shadow-lg transition-all active:scale-95\"\n            >\n             <Eye size={18} /> Aperçu\n           </button>\n        </div>\n\n        <div className=\"flex-1 flex overflow-hidden\">\n          {/* Sidebar */}\n          <div className=\"w-72 bg-white border-r border-gray-200 p-6 overflow-y-auto z-10 shadow-[4px_0_24px_rgba(0,0,0,0.02)]\">\n            <h3 className=\"font-bold mb-6 text-gray-900 uppercase text-xs tracking-wider\">Outils</h3>\n            <SidebarItem type=\"text\" icon={Type} label=\"Texte\" />\n            <SidebarItem type=\"box\" icon={Box} label=\"Forme / Boîte\" />\n            <SidebarItem type=\"line\" icon={Minus} label=\"Ligne\" />\n            <SidebarItem type=\"table\" icon={TableIcon} label=\"Tableau d'articles\" />\n            \n            <div className=\"mt-8 p-4 bg-blue-50 rounded-xl border border-blue-100\">\n               <p className=\"text-xs text-blue-700 leading-relaxed\">\n                 <strong>Astuce :</strong> Utilisez \"Tableau d'articles\" pour afficher automatiquement la liste des produits lors de la génération de la facture.\n               </p>\n            </div>\n          </div>\n\n          {/* Canvas Area */}\n          <div className=\"flex-1 bg-gray-100/50 p-12 overflow-auto flex justify-center\">\n             <div \n               ref={setCanvasRef}\n               id=\"invoice-canvas\"\n               onClick={() => setSelectedId(null)}\n               className={`bg-white shadow-2xl relative transition-all duration-300 ${isOver ? 'ring-4 ring-blue-400/30 scale-[1.01]' : ''}`}\n               style={{ \n                 width: '794px', \n                 height: '1123px', \n                 minWidth: '794px', \n                 minHeight: '1123px',\n                 padding: `${globalSettings.padding}px`,\n                 paddingTop: `${globalSettings.padding + globalSettings.headerHeight}px`,\n                 paddingBottom: `${globalSettings.padding + globalSettings.footerHeight}px`\n               }}\n             >\n               {/* Guides des marges (visuel seulement) */}\n               <div className=\"absolute inset-0 pointer-events-none border border-dashed border-gray-200\" \n                 style={{ \n                   top: globalSettings.padding + globalSettings.headerHeight, \n                   bottom: globalSettings.padding + globalSettings.footerHeight, \n                   left: globalSettings.padding, \n                   right: globalSettings.padding \n                 }} \n               />\n               \n               {elements.length === 0 && !isOver && (\n                  <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n                     <div className=\"text-center text-gray-300\">\n                        <Box size={48} className=\"mx-auto mb-2 opacity-20\" />\n                        <p className=\"text-lg font-medium\">La page est vide</p>\n                        <p className=\"text-sm\">Commencez par glisser un élément</p>\n                     </div>\n                  </div>\n               )}\n               \n               {isOver && (\n                 <div className=\"absolute inset-0 bg-blue-50/10 pointer-events-none border-2 border-dashed border-blue-400 z-50 flex items-center justify-center\">\n                    <div className=\"bg-blue-500 text-white px-4 py-2 rounded-full shadow-lg font-medium animate-bounce\">\n                      Relâcher pour ajouter\n                    </div>\n                 </div>\n               )}\n\n               {elements.map(el => (\n                 <DraggableElement \n                   key={el.id} \n                   element={el} \n                   isSelected={selectedId === el.id} \n                   onSelect={setSelectedId} \n                  />\n               ))}\n             </div>\n          </div>\n\n          {/* Properties Panel */}\n          <div className=\"w-80 bg-white border-l border-gray-200 p-6 overflow-y-auto z-10 shadow-[-4px_0_24px_rgba(0,0,0,0.02)]\">\n            <h3 className=\"font-bold mb-6 text-gray-900 uppercase text-xs tracking-wider\">Propriétés</h3>\n            {selectedElement ? (\n              <div className=\"space-y-6\">\n                <div className=\"pb-4 border-b border-gray-100\">\n                  <label className=\"block text-xs font-medium text-gray-500 uppercase mb-1\">Type d'élément</label>\n                  <div className=\"text-gray-900 font-medium capitalize flex items-center gap-2\">\n                     <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\n                     {selectedElement.type === 'box' ? 'Boîte' : selectedElement.type === 'table' ? 'Tableau' : selectedElement.type}\n                  </div>\n                </div>\n                \n                {/* Alignement Position (Global) */}\n                <div className=\"pb-4 border-b border-gray-100\">\n                   <label className=\"block text-xs font-medium text-gray-500 uppercase mb-2\">Positionnement</label>\n                   <div className=\"flex bg-gray-50 rounded-lg p-1 border border-gray-200\">\n                      <button \n                        onClick={() => alignElement('left')}\n                        title=\"Aligner à gauche\"\n                        className=\"flex-1 py-1.5 flex justify-center rounded hover:bg-white hover:shadow-sm text-gray-500 hover:text-gray-900 transition-all\"\n                      >\n                        <LayoutTemplate size={16} className=\"rotate-180\" />\n                      </button>\n                      <button \n                        onClick={() => alignElement('center')}\n                        title=\"Centrer horizontalement\"\n                        className=\"flex-1 py-1.5 flex justify-center rounded hover:bg-white hover:shadow-sm text-gray-500 hover:text-gray-900 transition-all\"\n                      >\n                        <LayoutTemplate size={16} />\n                      </button>\n                      <button \n                        onClick={() => alignElement('right')}\n                        title=\"Aligner à droite\"\n                        className=\"flex-1 py-1.5 flex justify-center rounded hover:bg-white hover:shadow-sm text-gray-500 hover:text-gray-900 transition-all\"\n                      >\n                        <LayoutTemplate size={16} />\n                      </button>\n                   </div>\n                </div>\n\n                {/* Coordonnées et Dimensions */}\n                <div className=\"grid grid-cols-2 gap-4\">\n                   <div className=\"space-y-1\">\n                    <label className=\"block text-xs font-medium text-gray-500\">Position X</label>\n                    <input type=\"number\" value={selectedElement.x} onChange={(e) => updateSelected('x', parseInt(e.target.value))} className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\" />\n                   </div>\n                   <div className=\"space-y-1\">\n                    <label className=\"block text-xs font-medium text-gray-500\">Position Y</label>\n                    <input type=\"number\" value={selectedElement.y} onChange={(e) => updateSelected('y', parseInt(e.target.value))} className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\" />\n                   </div>\n                   <div className=\"space-y-1\">\n                    <label className=\"block text-xs font-medium text-gray-500\">Largeur</label>\n                    <input type=\"number\" value={selectedElement.w} onChange={(e) => updateSelected('w', parseInt(e.target.value))} className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\" />\n                   </div>\n                   <div className=\"space-y-1\">\n                    <label className=\"block text-xs font-medium text-gray-500\">Hauteur</label>\n                    <input type=\"number\" value={selectedElement.h} onChange={(e) => updateSelected('h', parseInt(e.target.value))} className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\" />\n                   </div>\n                </div>\n\n                {/* Styles de base */}\n                <div className=\"space-y-4 border-t border-gray-100 pt-4\">\n                   <h4 className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 flex items-center gap-2\">\n                     <Palette size={12} /> Apparence\n                   </h4>\n                   \n                   {/* Couleur de texte (pour Text) */}\n                   {selectedElement.type === 'text' && (\n                     <div>\n                        <label className=\"block text-xs font-medium text-gray-500 mb-1\">Couleur du texte</label>\n                        <div className=\"flex items-center gap-2\">\n                           <input \n                             type=\"color\" \n                             value={selectedElement.style?.color || '#000000'} \n                             onChange={(e) => updateSelected('style', { ...selectedElement.style, color: e.target.value })} \n                             className=\"h-8 w-8 rounded cursor-pointer border border-gray-200 p-0.5\"\n                           />\n                           <span className=\"text-xs text-gray-500\">{selectedElement.style?.color || '#000000'}</span>\n                        </div>\n                     </div>\n                   )}\n\n                   {/* Couleur de fond (pour Box, Line, Table) */}\n                   {(selectedElement.type === 'box' || selectedElement.type === 'line' || selectedElement.type === 'table') && (\n                     <div>\n                        <label className=\"block text-xs font-medium text-gray-500 mb-1\">\n                           {selectedElement.type === 'line' ? 'Couleur de la ligne' : 'Couleur de fond'}\n                        </label>\n                        <div className=\"flex items-center gap-2\">\n                           <input \n                             type=\"color\" \n                             value={selectedElement.style?.backgroundColor || (selectedElement.type === 'line' ? '#000000' : '#ffffff')} \n                             onChange={(e) => updateSelected('style', { ...selectedElement.style, backgroundColor: e.target.value })} \n                             className=\"h-8 w-8 rounded cursor-pointer border border-gray-200 p-0.5\"\n                           />\n                        </div>\n                     </div>\n                   )}\n\n                   {/* Bordure (pour Box) */}\n                   {selectedElement.type === 'box' && (\n                     <>\n                       <div>\n                          <label className=\"block text-xs font-medium text-gray-500 mb-1\">Couleur Bordure</label>\n                          <input \n                             type=\"color\" \n                             value={selectedElement.style?.borderColor || '#000000'} \n                             onChange={(e) => updateSelected('style', { ...selectedElement.style, borderColor: e.target.value })} \n                             className=\"h-8 w-8 rounded cursor-pointer border border-gray-200 p-0.5\"\n                           />\n                       </div>\n                       <div>\n                          <label className=\"block text-xs font-medium text-gray-500 mb-1\">Arrondi (px)</label>\n                          <input \n                             type=\"number\" \n                             value={parseInt(selectedElement.style?.borderRadius as string) || 0} \n                             onChange={(e) => updateSelected('style', { ...selectedElement.style, borderRadius: `${e.target.value}px` })} \n                             className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\"\n                           />\n                       </div>\n                     </>\n                   )}\n                </div>\n\n                {/* Contenu Texte & Variables */}\n                {selectedElement.type === 'text' && (\n                  <div className=\"space-y-4 border-t border-gray-100 pt-4\">\n                    <h4 className=\"text-xs font-bold text-gray-900 uppercase tracking-wider mb-2 flex items-center gap-2\">\n                     <Type size={12} /> Contenu\n                    </h4>\n                    \n                    <div className=\"space-y-1\">\n                       <label className=\"block text-xs font-medium text-gray-500\">Alignement</label>\n                       <div className=\"flex bg-gray-50 rounded-lg p-1 border border-gray-200\">\n                          <button \n                            onClick={() => updateSelected('style', { ...selectedElement.style, textAlign: 'left' })}\n                            className={`flex-1 py-1 flex justify-center rounded ${(!selectedElement.style?.textAlign || selectedElement.style?.textAlign === 'left') ? 'bg-white shadow-sm text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n                          >\n                            <AlignLeft size={16} />\n                          </button>\n                          <button \n                            onClick={() => updateSelected('style', { ...selectedElement.style, textAlign: 'center' })}\n                            className={`flex-1 py-1 flex justify-center rounded ${selectedElement.style?.textAlign === 'center' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n                          >\n                            <AlignCenter size={16} />\n                          </button>\n                          <button \n                            onClick={() => updateSelected('style', { ...selectedElement.style, textAlign: 'right' })}\n                            className={`flex-1 py-1 flex justify-center rounded ${selectedElement.style?.textAlign === 'right' ? 'bg-white shadow-sm text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n                          >\n                            <AlignRight size={16} />\n                          </button>\n                       </div>\n                    </div>\n\n                    <div className=\"space-y-1\">\n                      <label className=\"block text-xs font-medium text-gray-500\">Texte</label>\n                      <textarea \n                        value={selectedElement.content} \n                        onChange={(e) => updateSelected('content', e.target.value)}\n                        className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900 min-h-[80px]\"\n                        rows={4}\n                      />\n                    </div>\n                    \n                    <div>\n                       <label className=\"block text-xs font-medium text-gray-500 mb-2\">Insérer une variable</label>\n                       <div className=\"flex flex-wrap gap-2\">\n                          <button onClick={() => addVariable('client')} className=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded border border-blue-100 hover:bg-blue-100\">Client</button>\n                          <button onClick={() => addVariable('date')} className=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded border border-blue-100 hover:bg-blue-100\">Date</button>\n                          <button onClick={() => addVariable('number')} className=\"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded border border-blue-100 hover:bg-blue-100\">Numéro</button>\n                       </div>\n                    </div>\n\n                    <div className=\"space-y-1\">\n                       <label className=\"block text-xs font-medium text-gray-500\">Taille de police (px)</label>\n                       <input \n                         type=\"text\" \n                         value={selectedElement.style?.fontSize || ''} \n                         onChange={(e) => updateSelected('style', { ...selectedElement.style, fontSize: e.target.value })} \n                         className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\"\n                       />\n                    </div>\n                  </div>\n                )}\n\n                 <div className=\"pt-4 border-t border-gray-100 mt-4\">\n                   <button \n                     onClick={() => {\n                       setElements(elements.filter(e => e.id !== selectedId));\n                       setSelectedId(null);\n                     }}\n                     className=\"w-full bg-red-50 text-red-600 border border-red-100 py-2.5 rounded-lg hover:bg-red-100 hover:border-red-200 transition-colors font-medium text-sm flex items-center justify-center gap-2\"\n                   >\n                     Supprimer l'élément\n                   </button>\n                 </div>\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                <div className=\"flex items-center gap-2 pb-4 border-b border-gray-100\">\n                   <div className=\"p-2 bg-gray-100 rounded-lg text-gray-600\">\n                      <Settings size={20} />\n                   </div>\n                   <div>\n                      <h3 className=\"font-bold text-gray-900\">Paramètres globaux</h3>\n                      <p className=\"text-xs text-gray-500\">Configuration du document</p>\n                   </div>\n                </div>\n\n                <div className=\"space-y-4\">\n                   <div className=\"space-y-1\">\n                      <label className=\"block text-xs font-medium text-gray-500\">Marge de page (px)</label>\n                      <input \n                         type=\"number\" \n                         value={globalSettings.padding} \n                         onChange={(e) => setGlobalSettings({ ...globalSettings, padding: parseInt(e.target.value) || 0 })} \n                         className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\"\n                       />\n                   </div>\n                   \n                   <div className=\"space-y-1\">\n                      <label className=\"block text-xs font-medium text-gray-500\">Hauteur Header (px)</label>\n                      <input \n                         type=\"number\" \n                         value={globalSettings.headerHeight} \n                         onChange={(e) => setGlobalSettings({ ...globalSettings, headerHeight: parseInt(e.target.value) || 0 })} \n                         className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\"\n                       />\n                       <p className=\"text-[10px] text-gray-400\">Espace réservé en haut de page</p>\n                   </div>\n\n                   <div className=\"space-y-1\">\n                      <label className=\"block text-xs font-medium text-gray-500\">Hauteur Footer (px)</label>\n                      <input \n                         type=\"number\" \n                         value={globalSettings.footerHeight} \n                         onChange={(e) => setGlobalSettings({ ...globalSettings, footerHeight: parseInt(e.target.value) || 0 })} \n                         className=\"w-full bg-gray-50 border border-gray-200 rounded-md px-3 py-2 text-sm text-gray-900\"\n                       />\n                       <p className=\"text-[10px] text-gray-400\">Espace réservé en bas de page</p>\n                   </div>\n                </div>\n\n                <div className=\"p-4 bg-yellow-50 rounded-xl border border-yellow-100 mt-4\">\n                   <div className=\"flex gap-2\">\n                      <FileText className=\"text-yellow-600 shrink-0\" size={16} />\n                      <p className=\"text-xs text-yellow-700 leading-relaxed\">\n                        Ces marges définissent la zone de sécurité pour l'impression. Les éléments en dehors pourraient être coupés.\n                      </p>\n                   </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n      <DragOverlay>\n        {activeDragId ? (\n            <div className=\"bg-blue-600 p-3 rounded-lg text-white shadow-xl font-medium flex items-center gap-2\">\n               {activeDragData?.type === 'table' ? <TableIcon size={16}/> : <Box size={16}/>}\n               Ajouter {activeDragData?.type}\n            </div>\n        ) : null}\n      </DragOverlay>\n    </DndContext>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}