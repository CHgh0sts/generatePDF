{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/chghosts/Developpement/test%20gemini%203/lib/auth.ts"],"sourcesContent":["import { SignJWT, jwtVerify } from 'jose';\nimport { cookies } from 'next/headers';\nimport { NextRequest, NextResponse } from 'next/server';\n\nconst secretKey = process.env.JWT_SECRET || 'super_secret_jwt_key_change_me_in_prod';\nconst key = new TextEncoder().encode(secretKey);\n\nexport async function encrypt(payload: any) {\n  return await new SignJWT(payload)\n    .setProtectedHeader({ alg: 'HS256' })\n    .setIssuedAt()\n    .setExpirationTime('24h')\n    .sign(key);\n}\n\nexport async function decrypt(input: string): Promise<any> {\n  const { payload } = await jwtVerify(input, key, {\n    algorithms: ['HS256'],\n  });\n  return payload;\n}\n\nexport async function getSession() {\n  const cookieStore = await cookies();\n  const session = cookieStore.get('session')?.value;\n  if (!session) return null;\n  try {\n    return await decrypt(session);\n  } catch (error) {\n    return null;\n  }\n}\n\nexport async function login(formData: FormData) {\n  // Verify credentials and create session\n  // This will be called from the API route, but helper here\n}\n\nexport async function logout() {\n  const cookieStore = await cookies();\n  cookieStore.delete('session');\n}\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AACA;;;AAGA,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU,IAAI;AAC5C,MAAM,MAAM,IAAI,cAAc,MAAM,CAAC;AAE9B,eAAe,QAAQ,OAAY;IACxC,OAAO,MAAM,IAAI,gKAAO,CAAC,SACtB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,OAClB,IAAI,CAAC;AACV;AAEO,eAAe,QAAQ,KAAa;IACzC,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,oKAAS,EAAC,OAAO,KAAK;QAC9C,YAAY;YAAC;SAAQ;IACvB;IACA,OAAO;AACT;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,MAAM,UAAU,YAAY,GAAG,CAAC,YAAY;IAC5C,IAAI,CAAC,SAAS,OAAO;IACrB,IAAI;QACF,OAAO,MAAM,QAAQ;IACvB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AAEO,eAAe,MAAM,QAAkB;AAC5C,wCAAwC;AACxC,0DAA0D;AAC5D;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,IAAA,0IAAO;IACjC,YAAY,MAAM,CAAC;AACrB"}},
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/chghosts/Developpement/test%20gemini%203/app/dashboard/layout.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { getSession } from '@/lib/auth';\nimport { redirect } from 'next/navigation';\nimport { FileText, LogOut, User, Home, FileEdit, Zap } from 'lucide-react';\n\nexport default async function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const session = await getSession();\n  if (!session) redirect('/login');\n\n  return (\n    <div className=\"min-h-screen bg-white flex flex-col\">\n      <nav className=\"sticky top-0 z-30 bg-white/80 backdrop-blur-md border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between h-16\">\n            <div className=\"flex items-center gap-6\">\n               <Link href=\"/dashboard\" className=\"flex items-center gap-2\">\n                  <div className=\"bg-blue-600 p-1.5 rounded-lg\">\n                    <FileText className=\"h-5 w-5 text-white\" />\n                  </div>\n                  <span className=\"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600\">\n                    FacturX\n                  </span>\n               </Link>\n               \n               {/* Navigation rapide */}\n               <div className=\"hidden md:flex items-center gap-2\">\n                 <Link \n                   href=\"/dashboard\" \n                   className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                 >\n                   <Home size={18} />\n                   <span>Accueil</span>\n                 </Link>\n                 <Link \n                   href=\"/dashboard/generateroute\" \n                   className=\"flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors\"\n                 >\n                   <Zap size={18} />\n                   <span>Routes API</span>\n                 </Link>\n               </div>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex items-center text-sm text-gray-800 font-medium\">\n                <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 mr-2\">\n                   <User size={16} />\n                </div>\n                {session.user.name}\n              </div>\n               <form action=\"/api/auth/logout\" method=\"POST\">\n                <button \n                  type=\"submit\" \n                  className=\"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors\"\n                  title=\"Se dÃ©connecter\"\n                >\n                  <LogOut className=\"h-5 w-5\" />\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </nav>\n      <main className=\"flex-1 max-w-7xl w-full mx-auto py-8 sm:px-6 lg:px-8\">\n        {children}\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;;;;;;AAEe,eAAe,gBAAgB,EAC5C,QAAQ,EAGT;IACC,MAAM,UAAU,MAAM,IAAA,yHAAU;IAChC,IAAI,CAAC,SAAS,IAAA,iMAAQ,EAAC;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACZ,8OAAC,0LAAI;wCAAC,MAAK;wCAAa,WAAU;;0DAC/B,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,0NAAQ;oDAAC,WAAU;;;;;;;;;;;0DAEtB,8OAAC;gDAAK,WAAU;0DAA+F;;;;;;;;;;;;kDAMlH,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,0LAAI;gDACH,MAAK;gDACL,WAAU;;kEAEV,8OAAC,2MAAI;wDAAC,MAAM;;;;;;kEACZ,8OAAC;kEAAK;;;;;;;;;;;;0DAER,8OAAC,0LAAI;gDACH,MAAK;gDACL,WAAU;;kEAEV,8OAAC,uMAAG;wDAAC,MAAM;;;;;;kEACX,8OAAC;kEAAK;;;;;;;;;;;;;;;;;;;;;;;;0CAIb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,cAAA,8OAAC,0MAAI;oDAAC,MAAM;;;;;;;;;;;4CAEd,QAAQ,IAAI,CAAC,IAAI;;;;;;;kDAEnB,8OAAC;wCAAK,QAAO;wCAAmB,QAAO;kDACtC,cAAA,8OAAC;4CACC,MAAK;4CACL,WAAU;4CACV,OAAM;sDAEN,cAAA,8OAAC,oNAAM;gDAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO9B,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT"}}]
}